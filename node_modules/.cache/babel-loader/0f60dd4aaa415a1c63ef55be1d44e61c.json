{"remainingRequest":"/var/www/html/NodeVue/project2/frontend/node_modules/babel-loader/lib/index.js!/var/www/html/NodeVue/project2/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/var/www/html/NodeVue/project2/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/NodeVue/project2/frontend/src/views/auth/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/NodeVue/project2/frontend/src/views/auth/Login.vue","mtime":1583850485856},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL3Zhci93d3cvaHRtbC9Ob2RlVnVlL3Byb2plY3QyL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgUmVwb3NpdG9yeUZhY3RvcnkgfSBmcm9tICJAL3JlcG9zaXRvcnkvUmVwb3NpdG9yeUZhY3RvcnkiOwppbXBvcnQgc3dhbCBmcm9tICJzd2VldGFsZXJ0IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiAiIiwKICAgICAgdG9rZW46ICIiLAogICAgICBmb3JtOiB7CiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIgogICAgICB9LAogICAgICBja2V5OiAwCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIHRva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gUmVwb3NpdG9yeUZhY3RvcnkubG9naW5Vc2VyKF90aGlzLmZvcm0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICB0b2tlbiA9IHJlc3BvbnNlLmRhdGEudG9rZW47IC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3QiLCB0b2tlbik7CgogICAgICAgICAgICAgICAgX3RoaXMubWxvZ2luKHRva2VuLCBEYXRlLm5vdyk7CgogICAgICAgICAgICAgICAgX3RoaXMudXNlciA9IHJlc3BvbnNlLmRhdGEudXNlci5lbWFpbDsKICAgICAgICAgICAgICAgIF90aGlzLnRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dCIpOwogICAgICAgICAgICAgICAgX3RoaXMuY2tleSsrOyAvL1RoaXMgZm9yY2VzIHRoZSBuYXZiYXIgdG8gcmVyZW5kZXIKCiAgICAgICAgICAgICAgICBzd2FsKCJTdWNjZXNzIiwgIkxvZ2luIFN1Y2Nlc3NmdWwiLCAic3VjY2VzcyIpOwoKICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiL2Rhc2hib2FyZCIpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEzOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHN3YWwoIkVycm9yIiwgX2NvbnRleHQudDAucmVzcG9uc2UuZGF0YS5lcnJvciwgImVycm9yIik7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDEzXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBtbG9naW46IGZ1bmN0aW9uIG1sb2dpbihfcmVmLCBub1JlZGlyZWN0KSB7CiAgICAgIHZhciBqd3RfdG9rZW4gPSBfcmVmLmp3dF90b2tlbiwKICAgICAgICAgIGp3dF90b2tlbl9leHBpcnkgPSBfcmVmLmp3dF90b2tlbl9leHBpcnk7CiAgICAgIHZhciBpbk1lbW9yeVRva2VuOwogICAgICBpbk1lbW9yeVRva2VuID0gewogICAgICAgIHRva2VuOiBqd3RfdG9rZW4sCiAgICAgICAgZXhwaXJ5OiBqd3RfdG9rZW5fZXhwaXJ5CiAgICAgIH07CgogICAgICBpZiAoIW5vUmVkaXJlY3QpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA,SAAA,iBAAA,QAAA,gCAAA;AACA,OAAA,IAAA,MAAA,YAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAHA;AAOA,MAAA,IAAA,EAAA;AAPA,KAAA;AASA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,iBAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAFA;;AAAA;AAEA,gBAAA,QAFA;AAGA,gBAAA,KAHA,GAGA,QAAA,CAAA,IAAA,CAAA,KAHA,EAIA;;AACA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,EAAA,IAAA,CAAA,GAAA;;AACA,gBAAA,KAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,gBAAA,KAAA,CAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,KAAA,CAAA;AACA,gBAAA,KAAA,CAAA,IAAA,GARA,CAQA;;AACA,gBAAA,IAAA,CAAA,SAAA,EAAA,kBAAA,EAAA,SAAA,CAAA;;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,YAAA;;AAVA;AAAA;;AAAA;AAAA;AAAA;AAYA,gBAAA,IAAA,CAAA,OAAA,EAAA,YAAA,QAAA,CAAA,IAAA,CAAA,KAAA,EAAA,OAAA,CAAA;;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA,KAfA;AAgBA,IAAA,MAhBA,wBAgBA,UAhBA,EAgBA;AAAA,UAAA,SAAA,QAAA,SAAA;AAAA,UAAA,gBAAA,QAAA,gBAAA;AACA,UAAA,aAAA;AACA,MAAA,aAAA,GAAA;AACA,QAAA,KAAA,EAAA,SADA;AAEA,QAAA,MAAA,EAAA;AAFA,OAAA;;AAIA,UAAA,CAAA,UAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA;AACA;AAzBA;AAZA,CAAA","sourcesContent":["<template>\n  <div>\n    <Navbar :user=\"user\" :key=\"ckey\" />\n    <div class=\"row align-items-center justify-content-center\">\n      <div class=\"col-12 col-md-6 col-lg-6 col-xl-6 px-lg-6 my-5\">\n        <h1 class=\"display-4 text-center mb-3\">\n          Login\n        </h1>\n        <p class=\"text-muted text-center mb-5\">\n          Free access to our dashboard.\n        </p>\n        <form @submit.prevent=\"login\">\n          <div class=\"form-group text-left\">\n            <label for=\"identity\">Email</label>\n            <input\n              id=\"identity\"\n              type=\"email\"\n              class=\"form-control form-control-rounded\"\n              v-model=\"form.email\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <div class=\"row\">\n              <div class=\"col text-left\">\n                <label class=\"form-check-label\">Password</label>\n                <input\n                  type=\"password\"\n                  class=\"form-control form-control-rounded\"\n                  v-model=\"form.password\"\n                />\n              </div>\n            </div>\n          </div>\n          <button\n            type=\"submit\"\n            class=\"btn btn-lg btn-block btn-primary mb-3 form-control-rounded\"\n          >\n            Login\n          </button>\n          <hr />\n          <p class=\"text-center\">\n            <small class=\"text-muted text-center\">\n              Don't have an account yet?\n              <router-link :to=\"{ name: 'Register' }\">register</router-link>\n              .\n            </small>\n          </p>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { RepositoryFactory } from \"@/repository/RepositoryFactory\";\nimport swal from \"sweetalert\";\nexport default {\n  data() {\n    return {\n      user: \"\",\n      token: \"\",\n      form: {\n        email: \"\",\n        password: \"\"\n      },\n      ckey: 0\n    };\n  },\n  methods: {\n    async login() {\n      try {\n        let response = await RepositoryFactory.loginUser(this.form);\n        let token = response.data.token;\n        // localStorage.setItem(\"jwt\", token);\n        this.mlogin(token, Date.now);\n        this.user = response.data.user.email;\n        this.token = localStorage.getItem(\"jwt\");\n        this.ckey++; //This forces the navbar to rerender\n        swal(\"Success\", \"Login Successful\", \"success\");\n        this.$router.push(\"/dashboard\");\n      } catch (error) {\n        swal(\"Error\", error.response.data.error, \"error\");\n      }\n    },\n    mlogin({ jwt_token, jwt_token_expiry }, noRedirect) {\n      let inMemoryToken;\n      inMemoryToken = {\n        token: jwt_token,\n        expiry: jwt_token_expiry\n      };\n      if (!noRedirect) {\n        this.$router.push(\"/\");\n      }\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views/auth"}]}