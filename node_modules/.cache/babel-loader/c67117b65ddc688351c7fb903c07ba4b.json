{"remainingRequest":"/var/www/html/NodeVue/project2/frontend/node_modules/babel-loader/lib/index.js!/var/www/html/NodeVue/project2/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/var/www/html/NodeVue/project2/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/NodeVue/project2/frontend/src/views/auth/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/NodeVue/project2/frontend/src/views/auth/Login.vue","mtime":1583915330505},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL3Zhci93d3cvaHRtbC9Ob2RlVnVlL3Byb2plY3QyL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgUmVwb3NpdG9yeUZhY3RvcnkgfSBmcm9tICJAL3JlcG9zaXRvcnkvUmVwb3NpdG9yeUZhY3RvcnkiOwppbXBvcnQgc3dhbCBmcm9tICJzd2VldGFsZXJ0IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiAiIiwKICAgICAgdG9rZW46ICIiLAogICAgICBmb3JtOiB7CiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIgogICAgICB9LAogICAgICBja2V5OiAwCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIHRva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gUmVwb3NpdG9yeUZhY3RvcnkubG9naW5Vc2VyKF90aGlzLmZvcm0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICB0b2tlbiA9IHJlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0IiwgdG9rZW4pOwoKICAgICAgICAgICAgICAgIF90aGlzLiRjb29raWUuc2V0KCJ0b2tlbiIsIHRva2VuKTsKCiAgICAgICAgICAgICAgICBfdGhpcy51c2VyID0gcmVzcG9uc2UuZGF0YS51c2VyLmVtYWlsOwogICAgICAgICAgICAgICAgX3RoaXMudG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0Iik7CiAgICAgICAgICAgICAgICBfdGhpcy5ja2V5Kys7IC8vVGhpcyBmb3JjZXMgdGhlIG5hdmJhciB0byByZXJlbmRlcgoKICAgICAgICAgICAgICAgIHN3YWwoIlN1Y2Nlc3MiLCAiTG9naW4gU3VjY2Vzc2Z1bCIsICJzdWNjZXNzIik7CgogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCIvZGFzaGJvYXJkIik7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgc3dhbCgiRXJyb3IiLCBfY29udGV4dC50MC5yZXNwb25zZS5kYXRhLmVycm9yLCAiZXJyb3IiKTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTRdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA,SAAA,iBAAA,QAAA,gCAAA;AACA,OAAA,IAAA,MAAA,YAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAHA;AAOA,MAAA,IAAA,EAAA;AAPA,KAAA;AASA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,iBAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAFA;;AAAA;AAEA,gBAAA,QAFA;AAGA,gBAAA,KAHA,GAGA,QAAA,CAAA,IAAA,CAAA,KAHA;AAIA,gBAAA,YAAA,CAAA,OAAA,CAAA,KAAA,EAAA,KAAA;;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,KAAA;;AACA,gBAAA,KAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,gBAAA,KAAA,CAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,KAAA,CAAA;AACA,gBAAA,KAAA,CAAA,IAAA,GARA,CAQA;;AACA,gBAAA,IAAA,CAAA,SAAA,EAAA,kBAAA,EAAA,SAAA,CAAA;;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,YAAA;;AAVA;AAAA;;AAAA;AAAA;AAAA;AAYA,gBAAA,IAAA,CAAA,OAAA,EAAA,YAAA,QAAA,CAAA,IAAA,CAAA,KAAA,EAAA,OAAA,CAAA;;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAfA;AAZA,CAAA","sourcesContent":["<template>\n  <div>\n    <Navbar :user=\"user\" :key=\"ckey\" />\n    <div class=\"row align-items-center justify-content-center\">\n      <div class=\"col-12 col-md-6 col-lg-6 col-xl-6 px-lg-6 my-5\">\n        <h1 class=\"display-4 text-center mb-3\">\n          Login\n        </h1>\n        <p class=\"text-muted text-center mb-5\">\n          Free access to our dashboard.\n        </p>\n        <form @submit.prevent=\"login\">\n          <div class=\"form-group text-left\">\n            <label for=\"identity\">Email</label>\n            <input\n              id=\"identity\"\n              type=\"email\"\n              class=\"form-control form-control-rounded\"\n              v-model=\"form.email\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <div class=\"row\">\n              <div class=\"col text-left\">\n                <label class=\"form-check-label\">Password</label>\n                <input\n                  type=\"password\"\n                  class=\"form-control form-control-rounded\"\n                  v-model=\"form.password\"\n                />\n              </div>\n            </div>\n          </div>\n          <button\n            type=\"submit\"\n            class=\"btn btn-lg btn-block btn-primary mb-3 form-control-rounded\"\n          >\n            Login\n          </button>\n          <hr />\n          <p class=\"text-center\">\n            <small class=\"text-muted text-center\">\n              Don't have an account yet?\n              <router-link :to=\"{ name: 'Register' }\">register</router-link>\n              .\n            </small>\n          </p>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { RepositoryFactory } from \"@/repository/RepositoryFactory\";\nimport swal from \"sweetalert\";\nexport default {\n  data() {\n    return {\n      user: \"\",\n      token: \"\",\n      form: {\n        email: \"\",\n        password: \"\"\n      },\n      ckey: 0\n    };\n  },\n  methods: {\n    async login() {\n      try {\n        let response = await RepositoryFactory.loginUser(this.form);\n        let token = response.data.token;\n        localStorage.setItem(\"jwt\", token);\n        this.$cookie.set(\"token\", token);\n        this.user = response.data.user.email;\n        this.token = localStorage.getItem(\"jwt\");\n        this.ckey++; //This forces the navbar to rerender\n        swal(\"Success\", \"Login Successful\", \"success\");\n        this.$router.push(\"/dashboard\");\n      } catch (error) {\n        swal(\"Error\", error.response.data.error, \"error\");\n      }\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views/auth"}]}