{"remainingRequest":"/var/www/html/NodeVue/project2/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/NodeVue/project2/frontend/src/views/auth/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/NodeVue/project2/frontend/src/views/auth/Login.vue","mtime":1583850485856},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/NodeVue/project2/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFJlcG9zaXRvcnlGYWN0b3J5IH0gZnJvbSAiQC9yZXBvc2l0b3J5L1JlcG9zaXRvcnlGYWN0b3J5IjsKaW1wb3J0IHN3YWwgZnJvbSAic3dlZXRhbGVydCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogIiIsCiAgICAgIHRva2VuOiAiIiwKICAgICAgZm9ybTogewogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIKICAgICAgfSwKICAgICAgY2tleTogMAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvZ2luKCkgewogICAgICB0cnkgewogICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IFJlcG9zaXRvcnlGYWN0b3J5LmxvZ2luVXNlcih0aGlzLmZvcm0pOwogICAgICAgIGxldCB0b2tlbiA9IHJlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oImp3dCIsIHRva2VuKTsKICAgICAgICB0aGlzLm1sb2dpbih0b2tlbiwgRGF0ZS5ub3cpOwogICAgICAgIHRoaXMudXNlciA9IHJlc3BvbnNlLmRhdGEudXNlci5lbWFpbDsKICAgICAgICB0aGlzLnRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dCIpOwogICAgICAgIHRoaXMuY2tleSsrOyAvL1RoaXMgZm9yY2VzIHRoZSBuYXZiYXIgdG8gcmVyZW5kZXIKICAgICAgICBzd2FsKCJTdWNjZXNzIiwgIkxvZ2luIFN1Y2Nlc3NmdWwiLCAic3VjY2VzcyIpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvZGFzaGJvYXJkIik7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgc3dhbCgiRXJyb3IiLCBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yLCAiZXJyb3IiKTsKICAgICAgfQogICAgfSwKICAgIG1sb2dpbih7IGp3dF90b2tlbiwgand0X3Rva2VuX2V4cGlyeSB9LCBub1JlZGlyZWN0KSB7CiAgICAgIGxldCBpbk1lbW9yeVRva2VuOwogICAgICBpbk1lbW9yeVRva2VuID0gewogICAgICAgIHRva2VuOiBqd3RfdG9rZW4sCiAgICAgICAgZXhwaXJ5OiBqd3RfdG9rZW5fZXhwaXJ5CiAgICAgIH07CiAgICAgIGlmICghbm9SZWRpcmVjdCkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/auth","sourcesContent":["<template>\n  <div>\n    <Navbar :user=\"user\" :key=\"ckey\" />\n    <div class=\"row align-items-center justify-content-center\">\n      <div class=\"col-12 col-md-6 col-lg-6 col-xl-6 px-lg-6 my-5\">\n        <h1 class=\"display-4 text-center mb-3\">\n          Login\n        </h1>\n        <p class=\"text-muted text-center mb-5\">\n          Free access to our dashboard.\n        </p>\n        <form @submit.prevent=\"login\">\n          <div class=\"form-group text-left\">\n            <label for=\"identity\">Email</label>\n            <input\n              id=\"identity\"\n              type=\"email\"\n              class=\"form-control form-control-rounded\"\n              v-model=\"form.email\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <div class=\"row\">\n              <div class=\"col text-left\">\n                <label class=\"form-check-label\">Password</label>\n                <input\n                  type=\"password\"\n                  class=\"form-control form-control-rounded\"\n                  v-model=\"form.password\"\n                />\n              </div>\n            </div>\n          </div>\n          <button\n            type=\"submit\"\n            class=\"btn btn-lg btn-block btn-primary mb-3 form-control-rounded\"\n          >\n            Login\n          </button>\n          <hr />\n          <p class=\"text-center\">\n            <small class=\"text-muted text-center\">\n              Don't have an account yet?\n              <router-link :to=\"{ name: 'Register' }\">register</router-link>\n              .\n            </small>\n          </p>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { RepositoryFactory } from \"@/repository/RepositoryFactory\";\nimport swal from \"sweetalert\";\nexport default {\n  data() {\n    return {\n      user: \"\",\n      token: \"\",\n      form: {\n        email: \"\",\n        password: \"\"\n      },\n      ckey: 0\n    };\n  },\n  methods: {\n    async login() {\n      try {\n        let response = await RepositoryFactory.loginUser(this.form);\n        let token = response.data.token;\n        // localStorage.setItem(\"jwt\", token);\n        this.mlogin(token, Date.now);\n        this.user = response.data.user.email;\n        this.token = localStorage.getItem(\"jwt\");\n        this.ckey++; //This forces the navbar to rerender\n        swal(\"Success\", \"Login Successful\", \"success\");\n        this.$router.push(\"/dashboard\");\n      } catch (error) {\n        swal(\"Error\", error.response.data.error, \"error\");\n      }\n    },\n    mlogin({ jwt_token, jwt_token_expiry }, noRedirect) {\n      let inMemoryToken;\n      inMemoryToken = {\n        token: jwt_token,\n        expiry: jwt_token_expiry\n      };\n      if (!noRedirect) {\n        this.$router.push(\"/\");\n      }\n    }\n  }\n};\n</script>\n"]}]}